var __webpack_modules__={933:h=>{h.exports=".sl89-track{position:relative;width:200px;height:25px;background-color:hsl(0,0%,18%);}.slider89.vertical .sl89-track{height:200px;width:25px;}.sl89-thumb{position:absolute;width:16px;height:100%;background-color:hsl(0,0%,28%);cursor:pointer;}.slider89.vertical .sl89-thumb{height:16px;width:100%;}.sl89-noselect{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;}"}},__webpack_module_cache__={};function __webpack_require__(h){var e=__webpack_module_cache__[h];if(e!==void 0)return e.exports;var t=__webpack_module_cache__[h]={exports:{}};return __webpack_modules__[h](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=h=>{var e=h&&h.__esModule?()=>h.default:()=>h;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(h,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(h,t)&&Object.defineProperty(h,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(h,e)=>Object.prototype.hasOwnProperty.call(h,e),__webpack_require__.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var __webpack_exports__={};__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Slider89:()=>Slider89});var default_styles=__webpack_require__(933),default_styles_default=__webpack_require__.n(default_styles);class TypeCheckError extends Error{gotMessage;expectedMessage;constructor(e,t){super(`Expected ${t}, got ${e}`),this.gotMessage=e,this.expectedMessage=t,this.name=this.constructor.name}}class RuntimeTypeCheck{static getType(e){return Array.isArray(e)?"Array":Number.isNaN(e)?"NaN":e===null?"null":typeof e}static checkType(e,t){const s=this.#e(e,t);if(s)throw new TypeCheckError(s,RuntimeTypeCheck.buildDescriptorTypeMessage(t))}static#e(e,t){let s;for(const r of t){const n=r.type;if(n==="boolean"&&typeof e=="boolean"||n==="true"&&e===!0||n==="false"&&e===!1||n==="array"&&Array.isArray(e)||n==="object"&&Object.prototype.toString.call(e)==="[object Object]"||n==="number"&&typeof e=="number"&&!Number.isNaN(e)||n==="function"&&typeof e=="function"||n==="string"&&typeof e=="string"){if("descriptor"in r&&(n==="array"||n==="object")){let a=n==="array"?e:Object.values(e);for(const o of a)if(s=RuntimeTypeCheck.#e(o,r.descriptor))break}if(s)return RuntimeTypeCheck.toTitleCase(n)+"<"+s+">";if(s=RuntimeTypeCheck.buildConditionTypeMessage(r.conditions,e))break;return!1}}return s||RuntimeTypeCheck.getType(e)}static buildConditionTypeMessage(e,t){if(e){if(e.nonnegative&&t<0)return"a negative number";if(e.positive&&t<=0)return"a negative number or 0";if(e.integer&&t%1!==0)return"a floating point number";if(e.filled&&t.trim()==="")return"an empty string";if(e.keywords&&e.keywords.indexOf(t)===-1)return"a different string";if(e.wordChar&&!Number.isNaN(Number(t)))return"a number string";if(e.length&&t.length!==e.length)return"an array of length "+t.length;if(e.nonempty&&t.length===0)return"an empty array"}}static buildDescriptorTypeMessage(e){let t="";for(const s of e){const r=s.type;if(t&&(t+=" OR "),r==="number"){const n=s.conditions?.nonnegative,a=s.conditions?.positive,o=s.conditions?.integer;n?t+="non-negative ":a&&(t+="positive "),t+=o?"integer":"number"}else if(r==="array"){if(s.conditions?.nonempty&&(t+="non-empty "),s.descriptor){const n=RuntimeTypeCheck.buildDescriptorTypeMessage(s.descriptor);t+="Array<"+n+">"}else t+="array";s.conditions?.length&&(t+=" of length "+s.conditions.length)}else if(r==="object")if(s.descriptor){const n=RuntimeTypeCheck.buildDescriptorTypeMessage(s.descriptor);t+="Object<"+s.keyName+", "+n+">"}else t+="object";else r==="string"?s.conditions?.keywords?(s.conditions.keywords.length>1?t+="one of the keywords":t+="the keyword",s.conditions.keywords.forEach(function(n,a,o){a!==0&&a===o.length-1?t+=" or":a!==0&&(t+=","),t+=' "'+n+'"'})):(s.conditions?.filled&&(t+="non-empty "),s.conditions?.wordChar&&(t+="non-number "),t+="string"):t+=r;s.shape&&(t+=" ("+s.shape+")")}return t}static toTitleCase(e){return e.slice(0,1).toUpperCase()+e.slice(1)}}class StructureParser{static specialVariables={tag_node:{getter:e=>e},thumb_index:{thumbOnly:!0,getter:(e,t,s)=>t.nodes[s].indexOf(e)},thumb_value:{thumbOnly:!0,getter:(e,t,s)=>t.values[t.nodes[s].indexOf(e)]}};static specialVariableProxy={values:["thumb_index","thumb_value"]};static regex=function(){const e={attr:{name:"[\\w-]+"},all:"[\\d\\D]",capName:"([\\w-]+)"};e.attr.value="(?:(?!<)"+e.all+")*?",e.tagType="(?:\\s+"+e.capName+")?",e.content='(?:\\s+"('+e.all+'+?)")?',e.attribs="(?:\\s+"+e.attr.name+"=\\["+e.attr.value+"\\])*",e.varContent="\\$((?:\\w+(?:\\.(?=\\w))?)+)";const t={variable:"\\{"+e.varContent+"\\}|"+e.varContent,attributes:"("+e.attr.name+")=\\[("+e.attr.value+")\\](?:\\s+|$)",tag:"<([/:])?"+e.capName+e.tagType+e.content+"("+e.attribs+")\\s*?>\\s*"},s={};for(let r in t)s[r]=new RegExp(t[r],"g");return s.variableNoFlag=new RegExp(t.variable),s}();structureVars={};thumbChildren=[];vals;constructor(e){this.vals=e}parseStructure(e,t){const s={slider:t};e=e.trim();for(const o in StructureParser.regex)StructureParser.regex[o].global&&(StructureParser.regex[o].lastIndex=0);const r=[];let n=0,a;for(;a=StructureParser.regex.tag.exec(e);){if(a.index!==n){const o="tag ‘<"+(a[1]||"")+a[2]+">’",l=e.slice(n,a.index).trim();throw new Slider89.StructureParseError(o,l)}if(n=StructureParser.regex.tag.lastIndex,a[1]!=="/"){const o=r[r.length-1]||"slider",l=this.assembleElement(s,a[2],r,a[3],a[4],a[5]);s[a[2]]=l,s[o].appendChild(l),r.includes("thumb")&&this.thumbChildren.push(a[2]),a[1]==null&&r.push(a[2])}else{const o=r.pop();if(o!==a[2])if(r.indexOf(a[2])!==-1)this.#s(o);else throw new Slider89.StructureError("The closing tag ‘</"+a[2]+">’ couldn't find a matching opening tag")}}if(n!==e.length)throw new Slider89.StructureParseError("end of string",e.slice(n));if(r.length>1)throw new Slider89.StructureError("Couldn't find a matching closing tag for following elements:"+Slider89.arrayToListString(r));return r.length===1&&this.#s(r[0]),s}assembleElement(e,t,s,r,n,a){if(Object.prototype.hasOwnProperty.call(e,t))throw new Slider89.StructureError("Every element must have a unique name but there are mutiple elements called ‘"+t+"’");const o=document.createElement(r||"div");if(n!=null){const l=document.createTextNode(n);l.textContent=n,o.appendChild(l),StructureParser.stringHasVariable(n)&&this.#e(n,l,t,s)}if(a){let l;for(;l=StructureParser.regex.attributes.exec(a);){const d=l[1],c=l[2],u=document.createAttribute(d);u.textContent=c,o.setAttributeNode(u),StructureParser.stringHasVariable(c)&&this.#e(c,u,t,s)}}return o}#e(e,t,s,r){const n=[];let a;for(;a=StructureParser.regex.variable.exec(e);){const o=a[1]||a[2],l=o.indexOf(".")!==-1?o.slice(0,o.indexOf(".")):o;if(!n.hasOwnProperty(l)){if(!Object.prototype.hasOwnProperty.call(this.vals,l)&&!StructureParser.checkForSpecialVariables(l,s,r))throw new Slider89.StructureError("‘"+l+"’ is not a recognized property and cannot be used as variable.Please check its spelling or initialize it in the constructor");this.#t(l,e,t),n.push(l)}}}#t(e,t,s){this.structureVars[e]==null&&(this.structureVars[e]={}),this.structureVars[e][t]==null&&(this.structureVars[e][t]=new Array),this.structureVars[e][t].push(s)}#s(e){throw new Slider89.StructureError("Couldn't find a closing tag for the element ‘<"+e+">’ (Should it be a self-closing tag marked with ‘:’?)")}static stringHasVariable(e){return StructureParser.regex.variableNoFlag.test(e)}static checkForSpecialVariables(e,t,s){if(Object.prototype.hasOwnProperty.call(StructureParser.specialVariables,e)){if(StructureParser.specialVariables[e].thumbOnly&&t!=="thumb"&&!s.includes("thumb"))throw new Slider89.StructureError("The variable ‘$"+e+"’ may only be used inside the ‘<thumb>’ tag and its children (It was found in ‘<"+s[s.length-1]+">’)");return!0}return!1}}class DOMBuilder extends StructureParser{thumbBase;thumbParent;baseElements={};structureVarThumbStrings={};thumbEvents={};constructor(e,t){super(e),this.thumbEvents=t}createSliderNode(e,t,s){const r=t?this.createSliderFromStructure(e,t,s):this.createSliderManually(e,s);for(let n=0;n<e;n++)this.addThumbToNodes(r,1/0);return r}createSliderManually(e,t){const s=document.createElement("div"),r={slider:[t],track:[s],thumb:[]};return this.thumbBase=document.createElement("div"),this.thumbParent=s,t.appendChild(s),r}createSliderFromStructure(e,t,s){const r=this.parseStructure(t,s);return this.#t(r),this.#e(r,e)}#e(e,t){const s={thumb:[]};for(const[r,n]of Object.entries(e))this.thumbChildren.includes(r)?(this.baseElements[r]=e[r],s[r]=[]):r!=="thumb"&&(s[r]=[n]);return this.#s(this.thumbBase),s}#t(e){e.thumb?(this.thumbBase=e.thumb,e.track&&(this.thumbParent=e.thumb.parentElement),this.baseElements.thumb=this.thumbBase):this.thumbBase=this.assembleElement(e,"thumb",[],"div"),e.track||(e.track=this.assembleElement(e,"track",[],"div"),e.thumb?e.thumb.parentNode.appendChild(e.track):e.slider.appendChild(e.track)),e.thumb&&e.thumb.parentNode.removeChild(e.thumb),this.thumbParent||(this.thumbParent=e.track)}#s(e){for(const[t,s]of Object.entries(this.structureVars)){let r=[];for(const[n,a]of Object.entries(s))for(const o of a)if(this.nodeHasBaseElementOwner(o)){r.push(n);break}r.length>0&&(this.structureVarThumbStrings[t]=r)}}addThumbToNodes(e,t){const s=this.#i();return e.thumb.splice(t,0,s),DOMBuilder.findNodeChildren(s).forEach((r,n)=>{const a=this.thumbChildren[n];e[a].splice(t,0,r)}),s}removeThumbFromNodes(e,t){const s=e.thumb.at(t);e.thumb.splice(t,1);for(const r of this.thumbChildren)e[r].splice(t,1);return this.thumbParent.removeChild(s),s}#i(){const e=this.thumbBase.cloneNode(!0);for(const[t,s]of Object.entries(this.thumbEvents))e.addEventListener(t,s,{passive:!(t.startsWith("touch")||t.startsWith("key"))});return this.thumbParent.appendChild(e),e}nodeHasBaseElementOwner(e){for(const[t,s]of Object.entries(this.baseElements))if(DOMBuilder.getNodeOwner(e)===s)return t;return!1}static getNodeOwner(e){return e.ownerElement||e.parentElement}static findNodeChildren(e,t=[]){if(e.childElementCount===0)return t;for(const s of e.children)t.push(s),DOMBuilder.findNodeChildren(s,t);return t}}class DOMVariables extends DOMBuilder{slider;constructor(e,t,s){super(t,s),this.slider=e}updatePotentialVariable(e){if(Object.prototype.hasOwnProperty.call(this.structureVars,e)){for(const[t,s]of Object.entries(this.structureVars[e]))this.#e(t,s);if(Object.prototype.hasOwnProperty.call(StructureParser.specialVariableProxy,e))for(const t of StructureParser.specialVariableProxy[e])this.updatePotentialVariable(t)}}updateAllVariables(){if(this.vals.structure!==!1)for(const e in this.structureVars)this.updatePotentialVariable(e)}expandAllBaseElementVariables(){for(const[e,t]of Object.entries(this.structureVarThumbStrings))for(const s of t){const r=this.structureVars[e][s];this.#e(s,r)}}#e(e,t){for(const[s,r,n]of this.#s(t))r.textContent=e.replace(StructureParser.regex.variable,(a,o,l)=>this.#t(o||l,s,n))}#t(e,t,s){const r=e.split(".").values(),n=r.next().value;let a;n in StructureParser.specialVariables?a=StructureParser.specialVariables[n].getter(t,this.slider,s):a=this.slider[n];for(const o of r)try{a=a[o]}catch{throw new Slider89.StructureError("Variable ‘"+e+"’ cannot access property ‘"+o+"’ on "+a)}return a}*#s(e){for(const t of e){const s=this.nodeHasBaseElementOwner(t);if(s){const r=this.vals.nodes[s];if(t.nodeType===Node.ATTRIBUTE_NODE)for(const n of r)yield[n,n.getAttributeNode(t.name),s];else for(const n of r)yield[n,n.childNodes[0],s]}else yield[DOMBuilder.getNodeOwner(t),t,s]}}}class SliderError{static COUNTS=["first","second","third","fourth","fifth","sixth","seventh","eighth","ninth"];static Error=class extends Error{constructor(e,t,s=!1){t&&(e="@ "+t+": "+e),e[e.length-1]!==`
`&&e[e.length-1]!=="."&&(e+="."),s&&(e+=`
Aborting the slider construction.`),super(e),this.name="Slider89"+this.constructor.name}};static InitializationError=class extends SliderError.Error{constructor(e){super(e,"constructor",!0)}};static PropertyError=class extends SliderError.Error{constructor(e,t,s){let r=e[t];r!==void 0&&(Array.isArray(r)&&(r="["+r.join(", ")+"]"),s+=`.
Continuing with the previous value (`+r+")."),super(s,t,r===void 0)}};static PropertyTypeError=class extends SliderError.PropertyError{constructor(e,t,s){super(e,t,"Type mismatch. "+s)}};static MethodArgTypeError=class extends SliderError.Error{constructor(e,t,s){const r=Slider89.getMethodArgInfo(e,t),n=`Type mismatch on the ${SliderError.getMethodArgMessage(r,t)}. ${s}`;super(n,e)}};static MethodArgOmitError=class extends SliderError.Error{constructor(e,t){const s=Slider89.getMethodArgInfo(e,t),r="The "+SliderError.getMethodArgMessage(s,t)+" has been omitted but it is required (It must be of type "+RuntimeTypeCheck.buildDescriptorTypeMessage(s.descriptor)+").";super(r,e)}};static StructureError=class extends SliderError.Error{constructor(e){super(e,"structure",!0)}};static StructureParseError=class extends SliderError.StructureError{constructor(e,t){const s="Something has been declared wrongly and couldn't be parsed. Point of failure (before "+e+`):

`+t+`
`;super(s)}};static getMethodArgMessage(e,t){let s="";return e.optional&&(s+="optional "),s+=Slider89.COUNTS[t]+" argument ("+e.name+")",s}static getMethodArgInfo(e,t){return Slider89.methodData[e].args[t]}static arrayToListString(e){return`
 - "`+e.join(`"
 - "`)+`"
`}}var PropertyNode;PropertyNode||(PropertyNode={});class Base extends SliderError{range;values;value;precision;step;structure;node;nodes;orientation;classList;events;plugins;extend;data;static methodData={addEvent:{args:[{name:"event type",descriptor:[{type:"string"}]},{name:"event function",descriptor:[{type:"function"}]},{name:"event namespace",optional:!0,descriptor:[{type:"string",conditions:{filled:!0,wordChar:!0}}]}]},removeEvent:{args:[{name:"event identifier/namespace",descriptor:[{type:"number",conditions:{nonnegative:!0,integer:!0}},{type:"string",conditions:{filled:!0,wordChar:!0}}]}]}};static propertyData={range:{isDeepDefinedArray:!0,descriptor:[{type:"array",shape:"[startValue, endValue]",conditions:{length:2},descriptor:[{type:"number"}]}]},values:{isDeepDefinedArray:!0,descriptor:[{type:"array",descriptor:[{type:"number"}]}]},value:{descriptor:[{type:"number"}]},precision:{descriptor:[{type:"number",conditions:{nonnegative:!0,integer:!0}},{type:"false"}]},step:{descriptor:[{type:"number",conditions:{positive:!0}},{type:"array",conditions:{nonempty:!0},descriptor:[{type:"number"}]},{type:"false"}]},structure:{constructorOnly:!0,descriptor:[{type:"string"},{type:"false"}]},node:{readOnly:!0},nodes:{readOnly:!0},orientation:{descriptor:[{type:"string",conditions:{keywords:["horizontal","vertical"]}}]},classList:{constructorOnly:!0,descriptor:[{type:"object",shape:"{nodeName: [...classes]}",keyName:"nodeName",descriptor:[{type:"array",descriptor:[{type:"string"}]}]},{type:"false"}]},events:{constructorOnly:!0,descriptor:[{type:"object",shape:"{eventName: [...functions]}",keyName:"eventName",descriptor:[{type:"array",descriptor:[{type:"function"}]}]},{type:"false"}]},plugins:{constructorOnly:!0,descriptor:[{type:"array",descriptor:[{type:"function"}]},{type:"false"}]},extend:{constructorOnly:!0,descriptor:[{type:"array",descriptor:[{type:"object"}]},{type:"false"}]},data:{constructorOnly:!0,descriptor:[{type:"object"},{type:"false"}]}};properties;domHandler;vals={};initial=!1;constructor(){super(),Object.defineProperties(this.vals,{$:{value:{}},$intermediateThis:{value:{}},$intermediateVals:{value:{}}})}static selfCheckMethod(e,t){const s=this.methodData[e],r=Array.prototype.slice.call(t,0,s.args.length);if(r.forEach((n,a)=>{const o=s.args[a].descriptor;try{RuntimeTypeCheck.checkType(n,o)}catch(l){throw l instanceof TypeCheckError?new this.MethodArgTypeError(e,a,l.message):l}}),s.args[r.length]&&!("optional"in s.args[r.length]))throw new this.MethodArgOmitError(e,r.length)}}class Events extends Base{static eventTypes=["update","start","move","end"];static eventTypesSpecial={"change:$property":{prefix:"change:",fn:(e,t,s)=>{if(!Object.prototype.hasOwnProperty.call(e.vals,t)){const r="‘"+s+"’ refers to ‘"+t+"’, which isn't a recognized property. Check its spelling and be aware that custom properties need to be initialized";throw new Slider89.Error(r,"addEvent")}}}};static availableEventTypes=this.eventTypes.concat(Object.keys(this.eventTypesSpecial));#e={};#t=0;addEvent(e,t,s){if(Base.selfCheckMethod("addEvent",arguments),!this.checkEventType(e)){const n="The specified event type ‘"+e+"’ is not valid. Available types are:"+Slider89.arrayToListString(Events.availableEventTypes);throw new Slider89.Error(n,"addEvent")}const r=s||this.#t++;return this.#s(e,t,r),r}removeEvent(e){if(Base.selfCheckMethod("removeEvent",arguments),!(e in this.#e))return!1;const t=this.#e[e];return delete this.#e[e],t.reduce(this.#i.bind(this),[])}invokeEvent(e,t){if(t.slider=this,e in this.vals.events)for(const s of this.vals.events[e])s(t)}#s(e,t,s){Array.isArray(this.vals.events[e])||(this.vals.events[e]=[]),this.vals.events[e].push(t);const r={type:e,fn:t};Array.isArray(this.#e[s])||(this.#e[s]=[]),this.#e[s].push(r)}#i(e,t){const s=this.vals.events[t.type],r=s.splice(s.indexOf(t.fn),1)[0];return s.length===0&&delete this.vals.events[t.type],e.push(r),e}checkEventType(e){for(const t of Object.values(Events.eventTypesSpecial))if(e.startsWith(t.prefix)){const s=e.slice(t.prefix.length);return t.fn(this,s,e),!0}return Events.eventTypes.includes(e)}}class Definition extends Events{#e=!1;defineInternalProperty(e,t,s,r){const n=Definition.propertyData[s]?.isDeepDefinedArray;Object.defineProperty(e,s,{set:a=>{if(!this.initial)var o=n?Array.from(this[s]):this[s];t[s]=a,n?(this.#t(s,a,o,r),this.invokeInternalDeepArrayChange(s,o,a)):this.invokeInternalPropertyChange(s,o),r?.postSetter?.(a,o)},get:()=>(n?this.vals.$intermediateVals:t)[s],enumerable:!0})}#t(e,t,s,r){const n=this.#i.bind(this,e,r.internalKeySetter),a=this.#s.bind(this,e,r.keySetter,r.keyGetter);this.#r(this.vals.$intermediateVals,e,t,n),this.#r(this.vals.$intermediateThis,e,t,a),this.#e=!0;for(let o=0;o<t.length;o++)r.keySetter?.(t[o],o,s),r.internalKeySetter?.(t[o],o,s);this.#e=!1}#s(e,t,s,r){const n=this.vals;return{set:a=>{(!t||!t(a,r))&&(n[e][r]=a)},get(){return s?s(n[e][r],r):n[e][r]}}}#i(e,t,s){const r=this.vals.$;return{set:n=>{if(this.#e)r[e][s]=n;else{if(!this.initial)var a=Array.from(this[e]);(!t||!t(n,s))&&(r[e][s]=n),this.invokeInternalDeepArrayChange(e,a,null,s)}},get(){return r[e][s]}}}#r(e,t,s,r){e[t]=[];for(let n=0;n<s.length;n++){const a=s[n],o=r(n);Object.defineProperty(e[t],n,Object.assign(o,{enumerable:!0}))}}invokeInternalPropertyChange(e,t){!this.initial&&(typeof this[e]=="object"||t!==this[e])&&(t??=this[e],this.domHandler.updatePotentialVariable(e),this.invokeEvent("change:"+e,{value:this[e],prevVal:t}))}invokeInternalDeepArrayChange(e,t,s,r){if(!this.initial)if(this.domHandler.updatePotentialVariable(e),r!=null)this.invokeDeepArrayChangeEvent(e,t,r);else for(let n=0;n<s.length;n++)this.invokeDeepArrayChangeEvent(e,t,n)}invokeDeepArrayChangeEvent(e,t,s){t[s]!==this[e][s]&&this.invokeEvent("change:"+e,{value:this[e],prevVal:t,deepIndex:s})}}class DOM extends Definition{activeTouchIDs=new Map;activeThumb;mouseDownPos;trackStyle;constructor(){super(),this.mouseStart=this.mouseStart.bind(this),this.mouseMove=this.mouseMove.bind(this),this.mouseEnd=this.mouseEnd.bind(this),this.touchStart=this.touchStart.bind(this),this.touchMove=this.touchMove.bind(this),this.touchEnd=this.touchEnd.bind(this),this.keyDown=this.keyDown.bind(this),this.domHandler=new DOMVariables(this,this.vals,{touchstart:this.touchStart,mousedown:this.mouseStart,keydown:this.keyDown})}getDirection(){return this.vals.orientation==="vertical"?{sizeC:"Height",size:"height",start:"top",end:"bottom"}:{sizeC:"Width",size:"width",start:"left",end:"right"}}getTrackPadding(e){return parseFloat(this.trackStyle.getPropertyValue("padding-"+e))}getTrackOffset(e){return parseFloat(this.trackStyle.getPropertyValue("border-"+e+"-width"))+this.getTrackPadding(e)}getTrackPosition(e){return this.vals.node.track.getBoundingClientRect()[e]+this.getTrackOffset(e)}getDistance(e){const t=this.getDirection().start;return e-this.getTrackPosition(t)}getThumbDistance(e){const t=this.getDirection().start;return this.getDistance(e.getBoundingClientRect()[t])}getThumbDistanceCentered(e){const t=this.getDirection(),s=e.getBoundingClientRect();return this.getDistance(s[t.start]+s[t.size]/2)}getAbsoluteTrackSize(e){const t=this.getDirection();return this.vals.node.track.getBoundingClientRect()[t.size]-this.getTrackOffset(t.start)-this.getTrackOffset(t.end)-e.getBoundingClientRect()[t.size]}moveElementTranslate(e,t){const s=this.vals.orientation==="vertical"?"Y":"X";e.style.transform="translate"+s+"("+t+"px)"}moveElementRelative(e,t,s=e){const r=this.getDirection(),n=this.getTrackPadding(r.start),a=this.getTrackPadding(r.end);let l=s.getBoundingClientRect()[r.size]*t+"px";a&&(l+=" - "+a*t+"px"),n&&(l+=" + "+n*(1-t)+"px"),e.style[r.start]="calc("+t*100+"% - "+l+")"}applyAllRelativeValues(e){for(let t=0;t<this.vals.values.length;t++)this.applyRelativeValue(t,e)}applyRelativeValue(e,t){const{value:s,prevRatio:r,ratio:n}=this.computeRelativeValue(e,t);this.vals.values[e]=s,Slider89.floatIsEqual(n,r)||this.moveElementRelative(this.vals.nodes.thumb[e],n)}computeDistanceValue(e,t,s=this.getAbsoluteTrackSize(e)){return t/s*(this.vals.range[1]-this.vals.range[0])+this.vals.range[0]}computeRelativeValue(e,t){let s,r;if(!t)t=this.vals,s=this.vals.values[e];else{for(let a of["range","step"])t[a]==null&&(t[a]=this.vals[a]);t.value!=null?s=t.value:(r=(this.vals.values[e]-this.vals.range[0])/(this.vals.range[1]-this.vals.range[0]),s=(t.range[1]-t.range[0])*r+t.range[0])}t.step!==!1&&(typeof t.step=="number"?s=this.clampValueToStep(s,t.step,t.range):s=Slider89.getClosestNumber(s,t.step));const n=this.getValueRatio(s,t.range);return{value:s,prevRatio:r,ratio:n}}addThumbElement(e,t=this.vals.nodes.thumb.length-1){const s=this.domHandler.addThumbToNodes(this.vals.nodes,t);this.setThumbAttributes(s,e)}removeThumbElement(e=-1){this.domHandler.removeThumbFromNodes(this.vals.nodes,e)}setThumbAttributes(e,t){e.classList.add("sl89-thumb"),e.setAttribute("role","slider"),e.setAttribute("aria-valuenow",t.toString()),e.setAttribute("aria-valuemin",this.vals.range[0].toString()),e.setAttribute("aria-valuemax",this.vals.range[1].toString()),e.setAttribute("aria-orientation",this.vals.orientation),e.tabIndex===-1&&(e.tabIndex=0)}setValueWithUpdateEvent(e,t=0,s){const r=this.values[t];this.values[t]=e,Slider89.floatIsEqual(e,this.values[t])||this.invokeEvent("update",{value:this.values[t],prevVal:r,thumbIndex:t,event:s})}setValueWithUpdateEventUnsafe(e,t,s){const r=this.values[t];this.vals.values[t]=e,this.invokeEvent("update",{value:this.values[t],prevVal:r,thumbIndex:t,event:s})}getValueRatio(e=this.vals.value,t=this.vals.range){return(e-t[0])/(t[1]-t[0])}changeDOMOrientation(e){e==="vertical"?(this.#e("left"),this.vals.node.slider.classList.add("vertical")):(this.#e("top"),this.vals.node.slider.classList.remove("vertical")),this.nodes.thumb.forEach(t=>{t.setAttribute("aria-orientation",e)})}#e(e){for(const t of this.vals.nodes.thumb)t.style.removeProperty(e)}clampValueToStep(e,t,s){return s[0]<s[1]?Math.min(s[1],Math.max(s[0],s[0]+Math.ceil((e-s[0])/t)*t)):Math.min(s[0],Math.max(s[1],s[0]+Math.floor((e-s[0])/t)*t))}clampValueToRange(e,t){if(t[0]<t[1]){if(e<t[0])return t[0];if(e>t[1])return t[1]}else{if(e>t[0])return t[0];if(e<t[1])return t[1]}return e}touchStart(e){e.preventDefault();const t=e.changedTouches[0];if(!this.activeTouchIDs.has(t.identifier)){const s=e.currentTarget;this.activeTouchIDs.set(t.identifier,s),this.slideStart(s,t,e),s.addEventListener("touchmove",this.touchMove,{passive:!1}),s.addEventListener("touchend",this.touchEnd),s.addEventListener("touchcancel",this.touchEnd)}}touchMove(e){e.preventDefault();for(const t of e.changedTouches)if(this.activeTouchIDs.has(t.identifier)){const s=this.activeTouchIDs.get(t.identifier);this.slideMove(s,t,e)}}touchEnd(e){e.preventDefault();for(const t of e.changedTouches)if(this.activeTouchIDs.has(t.identifier)){const s=this.activeTouchIDs.get(t.identifier);this.activeTouchIDs.delete(t.identifier),this.slideEnd(s,t,e),s.removeEventListener("touchmove",this.touchMove,{passive:!1}),s.removeEventListener("touchend",this.touchEnd),s.removeEventListener("touchcancel",this.touchEnd)}}mouseStart(e,t=e.currentTarget){document.body.classList.add("sl89-noselect"),this.slideStart(t,e,e),this.activeThumb||(this.activeThumb=t,window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseEnd))}mouseMove(e){this.slideMove(this.activeThumb,e,e)}mouseEnd(e){this.slideEnd(this.activeThumb,e,e),window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseEnd),this.activeThumb=null}slideStart(e,t,s){const r=this.vals.nodes.thumb.indexOf(e),n=this.getThumbDistance(e);if(e.classList.add("active"),this.vals.orientation==="vertical")var a="top",o=t.clientY;else var a="left",o=t.clientX;this.mouseDownPos=o-n,this.moveElementTranslate(e,n),this.invokeEvent("start",{thumbIndex:r,event:s}),e.style.removeProperty(a)}slideMove(e,t,s){const r=this.vals.nodes.thumb.indexOf(e),n=this.getAbsoluteTrackSize(e);let a=(this.vals.orientation==="vertical"?t.clientY:t.clientX)-this.mouseDownPos;a>n?a=n:a<0&&(a=0);let o=this.computeDistanceValue(e,a,n);if(this.vals.step!==!1){const l=this.computeRelativeValue(r,{value:o});o=l.value,a=l.ratio*n}Slider89.floatIsEqual(o,this.vals.values[r])||(this.setValueWithUpdateEventUnsafe(o,r,s),this.moveElementTranslate(e,a),this.invokeEvent("move",{thumbIndex:r,event:s}))}slideEnd(e,t,s){const r=this.vals.nodes.thumb.indexOf(e);this.applyRelativeValue(r),e.style.removeProperty("transform"),this.invokeEvent("end",{thumbIndex:r,event:s}),e.classList.remove("active"),document.body.classList.remove("sl89-noselect"),this.mouseDownPos=null}keyDown(e){if(!e.key.startsWith("Arrow"))return;const t=this.vals.nodes.thumb.indexOf(e.currentTarget);let s=Math.round((this.vals.range[1]-this.vals.range[0])/100);e.shiftKey&&e.ctrlKey?s*=.1:e.shiftKey&&(s*=10),e.key==="ArrowLeft"||e.key==="ArrowUp"?(e.preventDefault(),this.values[t]-=s):(e.key==="ArrowRight"||e.key==="ArrowDown")&&(e.preventDefault(),this.values[t]+=s)}}class Setup extends DOM{buildSlider(e,t){const s=t?e:document.createElement("div");this.vals.nodes=this.domHandler.createSliderNode(this.vals.values.length,this.vals.structure,s),this.#e(),this.#t(),this.vals.nodes.thumb.forEach((r,n)=>{this.setThumbAttributes(r,this.vals.values[n])}),t||e.appendChild(this.vals.node.slider),Slider89.injectStyleSheetIfNeeded(),this.trackStyle=getComputedStyle(this.vals.node.track)}testAndExtendConfig(e,t=e){if(this.testConfig(e),e.extend)for(let s=e.extend.length-1;s>=0;s--){const r=e.extend[s];for(const[n,a]of Object.entries(r))this.properties[n]?.extendAssigner?a!==!1&&e[n]!==!1&&this.properties[n].extendAssigner(t,a,s):n in t||(t[n]=a);this.testAndExtendConfig(r,t)}}callPlugins(e){for(const t of e)t(this)}#e(){for(const e in this.vals.nodes)Object.defineProperty(this.vals.node,e,{get:()=>this.vals.nodes[e][0],enumerable:!0})}#t(){this.vals.nodes.track[0].classList.add("sl89-track"),this.vals.nodes.slider[0].classList.add("slider89"),this.vals.orientation==="vertical"&&this.vals.nodes.slider[0].classList.add("vertical"),this.vals.classList&&this.addClassesToNodes(this.vals.classList)}addClassesToNodes(e){for(const[t,s]of Object.entries(e))if(Object.prototype.hasOwnProperty.call(this.vals.nodes,t)){const r=this.vals.nodes[t];for(const n of s)for(const a of r)a.classList.add(n)}}initializeProperties(e,t){for(const[s,r]of Object.entries(t)){if(this.initializeProperty(s,r),s in e&&(!r.extendAssigner||e[s]!==!1))this[s]=e[s];else if("default"in r){const n=r.default;(r.getter||r.keyGetter?this:this.vals)[s]=typeof n=="function"?n():n}delete e[s]}for(const s in e)this.defineInternalProperty(this,this.vals,s),this.vals[s]=e[s]}initializeProperty(e,t){this.defineInternalBuiltinProperty(e,t),this.defineInternalProperty(this.vals,this.vals.$,e,t)}defineInternalBuiltinProperty(e,t){const s=Slider89.propertyData[e];Object.defineProperty(this,e,{set:r=>{if(s.constructorOnly&&!this.initial)throw new Slider89.Error("Property ‘"+e+"’ may only be defined in the constructor (It was just set with the value ‘"+r+"’)");this.checkProp(e,r),(!t.setter||!t.setter(r))&&(this.vals[e]=r)},get:()=>{const r=s.isDeepDefinedArray?this.vals.$intermediateThis:this.vals;return t.getter?t.getter(r[e]):r[e]},enumerable:!0})}testInitialTarget(e){if(e){if(!e.nodeType||e.nodeType!==1)throw new Slider89.InitializationError("The first argument must be a valid DOM node (got "+RuntimeTypeCheck.getType(e)+")")}else throw new Slider89.InitializationError("No first argument has been supplied. It needs to be the DOM target node for the slider")}testInitialConfig(e){if(typeof e!="object"||Array.isArray(e))throw new Slider89.InitializationError("The optional second argument needs to be a configuration object (got "+RuntimeTypeCheck.getType(e)+")");if("value"in e&&"values"in e)throw new Slider89.InitializationError("Only one of ‘value’ and ‘values’ may be defined at once")}testConfig(e){for(const[t,s]of Object.entries(e))if(t in this.properties)this.checkProp(t,s);else if(t[0]!=="_")throw new Slider89.InitializationError("‘"+t+"’ is not a valid property name. Check its spelling or prefix it with an underscore to use it as custom property (‘_"+t+"’)")}checkProp(e,t){const s=Slider89.propertyData[e];if("readOnly"in s)throw new Slider89.Error("Property ‘"+e+"’ is read-only (It was just set with the value ‘"+t+"’)");try{RuntimeTypeCheck.checkType(t,s.descriptor)}catch(r){throw r instanceof TypeCheckError?new Slider89.PropertyTypeError(this,e,r.message):r}}}class Slider89 extends Setup{static injectCSS=!0;static injectedStyleSheet;properties={range:{default:[0,100],setter:e=>{if(e[0]===e[1])throw new Slider89.PropertyError(this,"range","The given range of ["+e.join(", ")+"] defines the same value for both range start and end");this.initial||this.applyAllRelativeValues({range:e})},internalKeySetter:(e,t)=>{if(this.nodes){const s=t===0?"aria-valuemin":"aria-valuemax";this.nodes.thumb.forEach(r=>{r.setAttribute(s,e.toString())})}},keySetter:(e,t)=>{if(e===this.vals.range[Math.abs(t-1)])throw new Slider89.PropertyError(this,"range","The new range of ["+e+", "+e+"] defines the same value for both range start and end");if(!this.initial){const s=Array.from(this.vals.range);s[t]=e,this.applyAllRelativeValues({range:s})}}},values:{default:()=>[this.vals.range[0]],setter:e=>{if(!this.initial){if(e.length>this.vals.values.length)for(let t=this.vals.values.length;t<e.length;t++)this.addThumbElement(e[t]);else if(e.length<this.vals.values.length)for(let t=e.length;t<this.vals.values.length;t++)this.removeThumbElement()}},postSetter:(e,t)=>{this.initial||(t.length!==e.length&&(this.invokeInternalPropertyChange("node"),this.invokeInternalPropertyChange("nodes")),this.domHandler.expandAllBaseElementVariables())},internalKeySetter:(e,t,s)=>{if(this.nodes&&this.nodes.thumb[t].setAttribute("aria-valuenow",e.toString()),!this.initial&&t===0){let r;return s?r=s[t]:(r=this.vals.values[t],this.vals.$.values[t]=e),this.invokeInternalPropertyChange("value",r),!0}},keySetter:(e,t)=>(e=this.clampValueToRange(e,this.vals.range),this.initial?this.vals.values[t]=e:this.applyRelativeValue(t,{value:e}),!0),keyGetter:(e,t)=>this.vals.precision!==!1?Number(e.toFixed(this.vals.precision)):e},value:{setter:e=>(this.values[0]=e,!0),getter:e=>this.values[0]},precision:{default:!1,setter:e=>{this.initial||this.applyAllRelativeValues()}},step:{default:!1,setter:e=>{if(this.vals.precision!==!1&&typeof e=="number"&&Number(e.toFixed(this.vals.precision))!==e)throw new Slider89.PropertyError(this,"step","The given value of "+e+" exceeds the currently set precision of "+this.vals.precision);this.initial||this.applyAllRelativeValues({step:e})}},structure:{default:!1},node:{default:{}},nodes:{default:{}},orientation:{default:"horizontal",setter:e=>{if(!this.initial)return this.changeDOMOrientation(e),this.vals.orientation=e,this.applyAllRelativeValues(),!0}},classList:{default:{},extendAssigner:Slider89.#e.bind(Slider89,"classList")},events:{default:{},setter:e=>{const t=[];for(let s in e)this.checkEventType(s)||t.push(s);if(t.length>0)throw new Slider89.PropertyError(this,"events","The given object contains items which are no valid event types:"+Slider89.arrayToListString(t)+"Available event types are:"+Slider89.arrayToListString(Slider89.availableEventTypes))},extendAssigner:Slider89.#e.bind(Slider89,"events")},plugins:{default:[],extendAssigner:(e,t)=>{e.plugins||=[],e.plugins.unshift(...t.filter(s=>!e.plugins.includes(s)))}},extend:{default:[],extendAssigner:(e,t,s)=>{e.extend.splice(s,0,...t)}},data:{default:{},extendAssigner:(e,t)=>{e.data=Object.assign(t,e.data||{})}}};constructor(e,t,s=!1){super(),this.initial=!0,(t==null||t===!1)&&(t={}),this.testInitialTarget(e),this.testInitialConfig(t),this.testAndExtendConfig(t),this.initializeProperties(t,this.properties),this.buildSlider(e,s),this.applyAllRelativeValues(),this.domHandler.updateAllVariables(),this.initial=!1,this.callPlugins(this.vals.plugins)}static floatIsEqual(e,t){return Math.abs(e-t)<1e-11}static getClosestNumber(e,t){return t.reduce((s,r)=>Math.abs(s-e)<Math.abs(r-e)?s:r)}static injectStyleSheetIfNeeded(){if(this.injectCSS&&this.injectedStyleSheet==null){const e=document.createElement("style"),t=document.head.firstElementChild;e.textContent=default_styles_default(),t?document.head.insertBefore(e,t):document.head.appendChild(e),this.injectedStyleSheet=e}}static removeInjectedStyleSheet(){this.injectedStyleSheet!=null&&(document.head.removeChild(this.injectedStyleSheet),this.injectedStyleSheet=null)}static#e(e,t,s){t[e]||={},this.#t(t[e],s)}static#t(e,t){for(const[s,r]of Object.entries(t))e[s]||=[],e[s].push(...r.filter(n=>!e[s].includes(n)))}}var __webpack_export_target__=window;for(var i in __webpack_exports__)__webpack_export_target__[i]=__webpack_exports__[i];__webpack_exports__.__esModule&&Object.defineProperty(__webpack_export_target__,"__esModule",{value:!0});
